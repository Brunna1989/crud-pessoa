# CRUD de Pessoas e Endere√ßos ‚Äî Spring Boot + H2

Este projeto √© uma aplica√ß√£o **CRUD completa** utilizando **Spring Boot**, **JPA/Hibernate**, **Banco de Dados H2**, **Lombok** e arquitetura limpa com **Services**, **Controllers**, **Repositories** e **tratamento de exce√ß√µes personalizadas**.

A aplica√ß√£o gerencia duas entidades:

- **Pessoa** (nome, CPF, data de nascimento, idade calculada automaticamente)
- **Endere√ßo** (rua, n√∫mero, bairro, cidade, estado e CEP)

Com um relacionamento **um-para-muitos**:  
‚û° **Uma Pessoa pode possuir v√°rios Endere√ßos.**

---

## ‚ú® Funcionalidades

### üìå Pessoa
- Criar uma nova pessoa **com um ou mais endere√ßos**
- Listar todas as pessoas com seus endere√ßos
- Buscar pessoa por ID
- Atualizar cadastro de uma pessoa
- Excluir pessoa e todos seus endere√ßos
- Calcular e retornar a **idade** de uma pessoa
- **Valida√ß√£o de CPF √∫nico** com exce√ß√£o personalizada

### üìå Endere√ßo
- CRUD completo de endere√ßos
- Endere√ßos vinculados automaticamente ao ID de uma pessoa

---
## üõ† Tecnologias Utilizadas

- **Java 21**
- **Spring Boot 3.x**
- Spring Web
- Spring Data JPA
- Banco de dados **H2**
- Lombok
- Jakarta Validation
- Maven

---

## üóÑ Banco de Dados H2

Acesse o console H2 em:

> http://localhost:8080/h2-console

Use as seguintes configura√ß√µes:

JDBC URL: jdbc:h2:mem:crud
User: sa
Password: (em branco)

---


---

## üöÄ Executar o Projeto

### Via Maven

```bash
mvn spring-boot:run
````

Ou via IDE

Execute a classe:

CrudPessoaApplication.java

---

## üì° Endpoints da API:

üßç Pessoa
‚û§ Criar nova pessoa:

```http request
POST /pessoas
````

Exemplo JSON:

```json
{
  "nome": "Maria Silva",
  "cpf": "12345678900",
  "dataNascimento": "1998-05-10",
  "enderecos": [
    {
      "rua": "Rua A",
      "numero": "100",
      "bairro": "Centro",
      "cidade": "Porto Alegre",
      "estado": "RS",
      "cep": "90000000"
    }
  ]
}
```

‚û§ Listar todas as pessoas:

```http request
GET /pessoas
````

‚û§ Buscar pessoa por ID:

```http request
GET /pessoas/{id}
````

‚û§ Atualizar pessoa:
````http request
PUT /pessoas/{id}
````

‚û§ Excluir pessoa:
```http request
DELETE /pessoas/{id}
````

‚û§ Calcular idade:
```http request
GET /pessoas/{id}/idade
````

## üèò Endere√ßos

‚û§ Criar endere√ßo vinculado a uma pessoa:
```http request
POST /enderecos/{idPessoa}
````

‚û§ Listar endere√ßos:
```http request
GET /enderecos
````

‚û§ Buscar endere√ßo por ID:
```http request
GET /enderecos/{id}
````

‚û§ Atualizar endere√ßo por ID:
```http request
PUT /enderecos/{id}
````

‚û§ Excluir endere√ßo:
```http request
DELETE /enderecos/{id}
```

## ‚ö† Exce√ß√µes Personalizadas

O projeto usa tratamento de erro profissional com exceptions pr√≥prias:

CpfDuplicadoException

PessoaNaoEncontradaException

EnderecoNaoEncontradoException



üìú Licen√ßa

Projeto educacional. Livre para estudo, uso e refatora√ß√µes.